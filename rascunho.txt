const bolas = document.getElementsByClassName("ball");
const textoCor = document.getElementById("rgb-color");
const textoResposta = document.getElementById("answer");
const proximaCor = document.getElementById("bt-reset-game");
const resetScore = document.getElementById("bt-reset-score")
const score = document.getElementById("score");
const cores = [];
let pontos = 0;

if(localStorage.getItem("score")) {
  score.textContent = `Pontos: ${localStorage.getItem("score")}`;
  pontos = Number(localStorage.getItem("score"));    
}

function numeroAleatorio(mul) {
  const numero = Math.floor(Math.random() * mul);
  return numero;
};

function corAleatoria() {
  const rgb = `rgb(${numeroAleatorio(256)}, ${numeroAleatorio(256)}, ${numeroAleatorio(256)})`;
  return rgb;
};

function cliqueNaBola(event) {
  const corSelecionada = event.target.style.backgroundColor;
  if(corSelecionada === textoCor.textContent) {
    pontos += 3;
    textoResposta.textContent = 'Acertou!';    
  }else {
    pontos -= 1;
    textoResposta.textContent = 'Errou! Tente novamente!';
  };
  localStorage.setItem("score", pontos);
  score.textContent = `Pontos: ${pontos}`;
};

for(let bola = 0; bola < bolas.length; bola++) {
  const cor = corAleatoria();
  bolas[bola].style.backgroundColor = cor;
  cores[bola] = cor;
  bolas[bola].addEventListener('click', cliqueNaBola);
};

function adicionaCorAleatoria() {
  textoCor.textContent = cores[numeroAleatorio(6)];
};

adicionaCorAleatoria();

function reiniciaJogo() {
  window.location.reload();
};

proximaCor.addEventListener('click', reiniciaJogo);

function resetarPontos() {
  localStorage.removeItem("score");
  pontos = 0;
  score.textContent = `Pontos: ${pontos}`;
}
resetScore.addEventListener("click", resetarPontos);

//let tmp = setInterval(reiniciaJogo, 5000);